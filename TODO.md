# ClassTop 功能开发 TODO

## 🔥 今晚推荐实现（1-2小时内完成）

### 1. 课程提醒通知 ⭐⭐⭐⭐⭐
**难度**: 简单 | **时长**: 1小时 | **优先级**: 高

**功能描述**:
- 上课前 5/10/15 分钟发送系统通知
- 可配置提醒时间和开关

**实现要点**:
- 后端: Python 定时任务检查即将开始的课程
- 后端: 使用 Tauri notification API 发送通知
- 前端: Settings 页面添加提醒配置项
- 配置: `src-tauri/capabilities/default.json` 添加 notification 权限

---

### 2. 课程冲突检测 ⭐⭐⭐⭐
**难度**: 简单 | **时长**: 1-1.5小时 | **优先级**: 高

**功能描述**:
- 添加课程时自动检测时间冲突
- 显示冲突提示，允许强制添加或取消

**实现要点**:
- 后端: `schedule_manager.py` 添加 `check_conflict()` 方法
- 后端: 时间区间重叠算法，考虑周数过滤
- 前端: SchedulePage 显示冲突警告 dialog
- 前端: MDUI dialog 组件实现交互

---

### 3. 数据导入/导出 ⭐⭐⭐
**难度**: 简单 | **时长**: 1.5小时 | **优先级**: 中高

**功能描述**:
- 导出课程表为 JSON/CSV
- 导入课程表数据，支持数据验证

**实现要点**:
- 后端: `commands.py` 添加 `export_schedule()` 和 `import_schedule()`
- 后端: Python json/csv 模块处理数据
- 前端: Settings 页面添加导入/导出按钮
- 前端: Tauri `dialog` API 文件选择

---

## 🚀 周末深度开发（2-3小时）

### 4. TopBar 主题自定义 ��⭐⭐⭐
**难度**: 中等 | **时长**: 2小时

**功能描述**:
- 自定义 TopBar 背景色、透明度、字体
- 实时预览效果
- 保存多个主题预设

**实现要点**:
- 配置项: `topbar_bg_color`, `topbar_opacity`, `topbar_text_color`
- CSS 变量实现动态主题
- MDUI 颜色选择器
- TopBar.vue 响应式样式应用

---

### 5. 课程统计可视化 ⭐⭐⭐⭐⭐
**难度**: 中等 | **时长**: 2.5小时

**功能描述**:
- 统计本周/本学期上课时长
- 可视化课程分布、每日时长
- 图表展示数据

**实现要点**:
- 后端: `db.py` 添加统计查询函数
- 后端: `get_course_statistics()` 命令
- 前端: 创建 `Statistics.vue` 页面
- 前端: 集成 Chart.js 或 ECharts
- 路由: 添加 `/statistics` 路由

---

### 6. 课程笔记功能 ⭐⭐⭐⭐
**难度**: 中等 | **时长**: 2.5小时

**功能描述**:
- 每门课程支持 Markdown 笔记
- 笔记编辑和预览
- 自动保存

**实现要点**:
- 数据库: 新建 `course_notes` 表
- 后端: 笔记 CRUD 命令
- 前端: SchedulePage 添加笔记按钮
- 前端: Markdown 编辑器（vditor/toast-ui）
- 前端: marked.js 渲染预览

---

## 🎯 体验优化功能

### 7. 快速模板功能 ⭐⭐
**难度**: 简单 | **时长**: 1小时

**功能描述**:
- 保存常用课程安排为模板
- 一键应用模板批量添加课程

**实现要点**:
- 数据库: `schedule_templates` 表
- 后端: 模板 CRUD
- 前端: SchedulePage 添加模板管理

---

### 8. 课程表图片导出 ⭐⭐⭐
**难度**: 简单 | **时长**: 1.5小时

**功能描述**:
- 将课程表渲染为图片
- 保存/分享课程表截图

**实现要点**:
- 前端: html2canvas 库
- 前端: Canvas 转图片
- Tauri: save dialog 保存文件

---

### 9. 自习时间管理 ⭐⭐⭐⭐
**难度**: 中等 | **时长**: 2小时

**功能描述**:
- 标记自习时间段
- 在 TopBar 中显示自习提示
- 统计自习时长

**实现要点**:
- 数据库: courses 表添加 `is_study_time` 字段
- 后端: 自习时间通过 schedule 管理
- 前端: UI 区分课程和自习
- TopBar: 特殊样式显示自习

---

## 🛠 技术改进

### 10. 完善错误处理
- 统一错误提示 UI
- 改进日志记录
- 添加错误上报机制

### 11. 性能优化
- TopBar 减少重绘次数
- 课程数据缓存策略
- 数据库查询优化

### 12. 单元测试
- Python 后端单元测试
- Vue 组件测试
- E2E 集成测试

---

## 📋 长期规划

### AI 功能
- [ ] 课表图片 OCR 自动识别导入
- [ ] 智能课程时间推荐
- [ ] 语音助手集成

### 同步功能
- [ ] 通过 Management-Server 多设备同步
- [ ] 云端备份
- [ ] 协作课表（与同学共享）

### 桌面集成
- [ ] macOS/Windows 桌面小组件
- [ ] 全局快捷键
- [ ] 系统日历集成

### 学习工具
- [ ] 番茄钟计时器
- [ ] 专注模式
- [ ] 学习时长分析

---

## 💡 今晚建议选择

**快速出成果** (选 1 个):
1. **课程提醒通知** - 最实用，实现简单
2. **课程冲突检测** - 提升体验，逻辑清晰

**有挑战性** (选 1 个):
1. **数据导入/导出** - 重要功能，有一定技术含量
2. **TopBar 主题自定义** - 视觉效果好

**组合拳** (2-3 小时):
- 课程提醒通�� (1h) + 课程冲突检测 (1h)
- 数据导入/导出 (1.5h) + 课程表图片导出 (1h)

---

## 📝 实现规范

**代码风格**:
- Python: PEP 8
- Vue: Vue 3 Composition API
- 使用 Pydantic 定义请求/响应模型
- pyInvoke 调用统一封装到 utils/schedule.js

**开发流程**:
1. 后端添加 Python 命令 (`commands.py`)
2. 前端封装 API 调用 (`utils/schedule.js`)
3. 更新 capabilities (`src-tauri/capabilities/default.json`)
4. 前端实现 UI
5. 测试验证

**提交规范**:
- feat: 新功能
- fix: 修复
- refactor: 重构
- docs: 文档
- test: 测试
